# Phase 1: 프로젝트 기반 및 핵심 기능 - 체크리스트

## 📅 Phase 1: 프로젝트 기반 및 핵심 기능

## ✅ 1.1 프로젝트 초기 설정

### 1.1.1 개발 환경 구축
- [ ] **P0** 프로젝트 폴더 구조 생성
  - [ ] `src/core/` 폴더 생성
  - [ ] `src/adapters/` 폴더 생성  
  - [ ] `src/ui/` 폴더 생성
  - [ ] `src/ext/` 폴더 생성
- [ ] **P0** CRXJS + Vite 빌드 환경 설정
  - [ ] `package.json` 생성
  - [ ] `vite.config.ts` 설정
  - [ ] `@crxjs/vite-plugin` 설치
  - [ ] 빌드 스크립트 설정
- [ ] **P0** TypeScript 설정 (strict mode)
  - [ ] `tsconfig.json` 생성
  - [ ] strict mode 활성화
  - [ ] 타입 정의 파일 준비
- [ ] **P0** ESLint + Prettier 설정
  - [ ] ESLint 설정 파일 생성
  - [ ] Prettier 설정 파일 생성
  - [ ] 관련 의존성 설치
- [ ] **P0** 기본 manifest.json (MV3) 생성
  - [ ] Manifest V3 형식으로 작성
  - [ ] 기본 권한 설정
  - [ ] 서비스 워커 등록

### 1.1.2 기본 파일 생성
- [ ] **P0** 서비스 워커 기본 구조
  - [ ] `src/ext/service-worker.ts` 생성
  - [ ] 기본 이벤트 리스너 구현
  - [ ] 메시지 핸들링 구조
- [ ] **P0** 콘텐츠 스크립트 기본 구조
  - [ ] `src/ext/content-script.ts` 생성
  - [ ] DOM 조작 기본 함수
  - [ ] 메시지 전송 구조
- [ ] **P0** 팝업 HTML/CSS/TS 기본 구조
  - [ ] `src/ui/popup/index.html` 생성
  - [ ] `src/ui/popup/popup.ts` 생성
  - [ ] `src/ui/popup/popup.css` 생성
- [ ] **P0** 옵션 페이지 기본 구조
  - [ ] `src/ui/options/index.html` 생성
  - [ ] `src/ui/options/options.ts` 생성
  - [ ] `src/ui/options/options.css` 생성

## ✅ 1.2 Chrome AI API 연동

### 1.2.1 API 감지 및 가용성 확인
- [ ] **P0** `window.ai` 존재 여부 확인
  - [ ] `src/adapters/ai-api-detector.ts` 생성
  - [ ] API 존재 여부 체크 함수 구현
  - [ ] 사용자에게 API 상태 알림
- [ ] **P0** Language Detector API 가용성 확인
  - [ ] Language Detector API 감지 함수 구현
  - [ ] API 상태별 응답 처리
  - [ ] 오류 처리 및 로깅
- [ ] **P0** Translator API 가용성 확인
  - [ ] Translator API 감지 함수 구현
  - [ ] API 상태별 응답 처리
  - [ ] 오류 처리 및 로깅
- [ ] **P0** API 상태별 fallback 처리 구현
  - [ ] API 사용 불가 시 대안 UI 표시
  - [ ] 사용자에게 설정 방법 안내
  - [ ] 크롬 플래그 활성화 링크 제공
- [ ] **P0** 모델 다운로드 상태 확인
  - [ ] 모델 다운로드 진행률 감지
  - [ ] 다운로드 완료 상태 확인
  - [ ] 다운로드 실패 시 오류 처리

### 1.2.2 언어 감지 기능 구현
- [ ] **P0** Language Detector API 연동
  - [ ] `src/adapters/language-detector.ts` 생성
  - [ ] API 호출 함수 구현
  - [ ] 응답 데이터 파싱
- [ ] **P0** 웹 페이지 언어 자동 감지
  - [ ] 페이지 텍스트 샘플링
  - [ ] 언어 감지 요청 전송
  - [ ] 결과 처리 및 저장
- [ ] **P0** 감지된 언어 정보 저장 및 관리
  - [ ] `chrome.storage.local` 활용
  - [ ] 언어 정보 캐싱
  - [ ] 도메인별 언어 설정 저장
- [ ] **P0** 언어 감지 실패 시 사용자 알림
  - [ ] 오류 메시지 표시
  - [ ] 수동 언어 선택 옵션 제공
  - [ ] 재시도 기능 구현
- [ ] **P0** 모델 다운로드 프로세스 관리
  - [ ] 모델 다운로드 시작 및 모니터링
  - [ ] 다운로드 진행률 표시
  - [ ] 다운로드 완료 후 자동 언어 감지 시작

### 1.2.3 번역 기능 구현
- [ ] **P0** Translator API 연동
  - [ ] `src/adapters/translator.ts` 생성
  - [ ] API 호출 함수 구현
  - [ ] 응답 데이터 파싱
- [ ] **P0** 기본 텍스트 번역 기능
  - [ ] 단일 텍스트 번역
  - [ ] 언어 쌍 지정
  - [ ] 번역 결과 반환
- [ ] **P0** 언어 쌍별 번역 지원
  - [ ] 지원 언어 목록 관리
  - [ ] 언어 코드 변환
  - [ ] 유효한 언어 쌍 검증
- [ ] **P0** 번역 요청 큐 및 재시도 로직
  - [ ] 요청 큐 구현
  - [ ] 실패 시 재시도 로직
  - [ ] 동시 요청 제한
- [ ] **P0** 번역 모델 다운로드 관리
  - [ ] 번역 모델 다운로드 상태 확인
  - [ ] 다운로드 진행률 모니터링
  - [ ] 다운로드 완료 후 번역 기능 활성화

## ✅ 1.3 기본 번역 파이프라인

### 1.3.1 모델 다운로드 및 관리
- [ ] **P0** 모델 다운로드 상태 관리
  - [ ] `src/core/model-download-manager.ts` 생성
  - [ ] 다운로드 상태 추적 (Idle, Downloading, Completed, Error)
  - [ ] 다운로드 진행률 계산 및 저장
- [ ] **P0** 모델 가용성 확인
  - [ ] 모델 다운로드 완료 여부 확인
  - [ ] 모델 상태별 기능 활성화/비활성화
  - [ ] 모델 재다운로드 요청 처리
- [ ] **P0** 다운로드 진행률 표시
  - [ ] 진행률 바 UI 컴포넌트 구현
  - [ ] 다운로드 상태 메시지 표시
  - [ ] 다운로드 완료/실패 알림

### 1.3.2 텍스트 처리
- [ ] **P0** 웹 페이지 텍스트 추출
  - [ ] `src/core/text-extractor.ts` 생성
  - [ ] DOM에서 텍스트 노드 추출
  - [ ] HTML 태그 제거 및 정리
- [ ] **P0** 텍스트 청킹 (문장/문단 단위)
  - [ ] `src/core/text-chunker.ts` 생성
  - [ ] 문장 단위 분할
  - [ ] 최대 길이 제한 (800자)
- [ ] **P0** HTML 태그 보존 및 처리
  - [ ] 태그 구조 분석
  - [ ] 번역 후 태그 복원
  - [ ] 포맷팅 유지
- [ ] **P0** 번역 결과 병합 및 포맷팅
  - [ ] 청크별 번역 결과 병합
  - [ ] 원본 포맷팅 적용
  - [ ] 최종 HTML 생성

### 1.3.3 메시징 시스템
- [ ] **P0** 서비스 워커 ↔ 콘텐츠 스크립트 통신
  - [ ] `src/core/messaging.ts` 생성
  - [ ] 메시지 타입 정의
  - [ ] 송수신 함수 구현
- [ ] **P0** 타입 안전한 메시지 스키마 정의
  - [ ] TypeScript 인터페이스 정의
  - [ ] 메시지 유효성 검증
  - [ ] 타입 가드 함수 구현
- [ ] **P0** 모델 다운로드 관련 메시지 처리
  - [ ] 다운로드 상태 업데이트 메시지
  - [ ] 다운로드 진행률 전송
  - [ ] 다운로드 완료/실패 알림
- [ ] **P0** 오류 처리 및 사용자 피드백
  - [ ] 오류 타입 정의
  - [ ] 오류 메시지 표시
  - [ ] 사용자 액션 안내

## 📊 Phase 1 완료 체크

### 핵심 기능 동작 확인
- [ ] 프로젝트 빌드 및 로드 성공
- [ ] Chrome AI API 감지 및 연결 성공
- [ ] 모델 다운로드 프로세스 정상 동작
- [ ] 언어 자동 감지 동작
- [ ] 기본 번역 기능 동작
- [ ] 메시징 시스템 정상 작동

### 다음 단계 준비
- [ ] Phase 2 UI/UX 개발 계획 수립
- [ ] 사용자 테스트 계획 수립
- [ ] 성능 측정 기준 설정

---

**Phase 1 목표**: 기본 번역 기능이 동작하는 확장프로그램 완성
